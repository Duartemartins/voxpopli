<div class="max-w-xl space-y-6">
  <h1 class="text-2xl font-bold">Account Settings</h1>

  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-lg font-medium">Invite Codes</h2>
    <p class="mt-2 text-gray-600">Share these codes with friends to invite them to Voxpopli. Each code can only be used once.</p>
    
    <div class="mt-4 space-y-3">
      <% current_user.ensure_invite_codes!.each do |invite| %>
        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
          <div class="flex items-center gap-3">
            <code class="font-mono text-sm <%= invite.used_at? ? 'text-gray-400 line-through' : 'text-gray-900' %>">
              <%= invite.code %>
            </code>
            <% if invite.used_at? %>
              <span class="text-xs text-gray-500">
                Used by <%= invite.invitee&.username || 'unknown' %> on <%= invite.used_at.strftime('%b %d, %Y') %>
              </span>
            <% end %>
          </div>
          <div class="flex items-center gap-2">
            <% if invite.used_at? %>
              <span class="px-2 py-1 text-xs bg-gray-200 text-gray-600 rounded">Used</span>
            <% else %>
              <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded">Available</span>
              <button type="button" 
                      onclick="navigator.clipboard.writeText('<%= invite.code %>'); this.textContent='Copied!'; setTimeout(() => this.textContent='Copy', 2000)"
                      class="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition">
                Copy
              </button>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-lg font-medium">API Access</h2>
    <p class="mt-2 text-gray-600">Manage your API keys to access Voxpopli programmatically.</p>
    
    <%= link_to 'Manage API Keys', settings_api_keys_path,
        class: 'mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700' %>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-lg font-medium text-red-600">Danger Zone</h2>
    <p class="mt-2 text-gray-600">Once you delete your account, there is no going back. Please be certain.</p>
    
    <%= button_to 'Delete my account', settings_account_path, method: :delete,
        class: 'mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700',
        data: { turbo_confirm: 'Are you absolutely sure? This cannot be undone.' } %>
  </div>
</div>

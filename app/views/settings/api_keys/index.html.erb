<div class="max-w-2xl space-y-8">
  <h1 class="font-mono text-2xl font-bold text-white tracking-tighter flex items-center gap-2">
    <span class="text-acid-lime">>></span> API_ACCESS_CONTROL
  </h1>

  <% if flash[:api_key] %>
    <div class="border border-acid-lime bg-acid-lime/10 p-6 shadow-[0_0_15px_rgba(204,255,0,0.2)]">
      <h3 class="font-mono font-bold text-acid-lime mb-2 uppercase tracking-widest">>> NEW_KEY_GENERATED</h3>
      <p class="font-mono text-xs text-ash mb-4">Secure this credential immediately. It will not be displayed again.</p>
      <div class="flex items-center gap-4">
        <code id="api-key-value" class="flex-1 bg-obsidian border border-steel px-4 py-3 font-mono text-sm text-acid-lime break-all"><%= flash[:api_key] %></code>
        <button type="button" 
                data-controller="clipboard" 
                data-clipboard-content-value="<%= flash[:api_key] %>"
                data-action="click->clipboard#copy"
                class="px-4 py-3 bg-acid-lime text-obsidian font-mono font-bold uppercase tracking-widest hover:bg-white hover:shadow-[4px_4px_0_0_#FFF] transition-all cursor-pointer border-none text-xs">
          COPY
        </button>
      </div>
    </div>
  <% end %>

  <div class="bg-carbon border border-steel p-6 shadow-[4px_4px_0_0_#333]">
    <h2 class="font-mono text-lg font-bold text-white mb-2">GENERATE_NEW_KEY</h2>
    <p class="font-mono text-xs text-ash mb-6">Create programmatic access token for external applications.</p>

    <%= form_with model: [:settings, ApiKey.new], class: "mt-4" do |f| %>
      <div class="flex gap-4">
        <%= f.text_field :name, 
            placeholder: "ENTER_APP_IDENTIFIER...", 
            required: true,
            class: "flex-1 bg-obsidian border border-steel text-white font-mono p-3 focus:border-acid-lime focus:outline-none focus:shadow-[0_0_10px_rgba(204,255,0,0.3)] transition-all placeholder-steel" %>
        <%= f.submit "GENERATE_KEY", 
            class: "px-6 py-3 bg-acid-cyan text-obsidian font-mono font-bold uppercase tracking-widest hover:bg-white hover:shadow-[4px_4px_0_0_#FFF] transition-all cursor-pointer border-none text-xs" %>
      </div>
    <% end %>
  </div>

  <% if @api_keys.any? %>
    <div class="bg-carbon border border-steel shadow-[4px_4px_0_0_#333]">
      <div class="px-6 py-4 border-b border-steel bg-obsidian/50">
        <h2 class="font-mono text-sm font-bold text-white uppercase tracking-widest">ACTIVE_CREDENTIALS</h2>
      </div>
      <ul class="divide-y divide-steel">
        <% @api_keys.each do |api_key| %>
          <li class="px-6 py-4 flex items-center justify-between hover:bg-obsidian/30 transition-colors">
            <div>
              <p class="font-mono text-white font-bold mb-1"><%= api_key.name %></p>
              <p class="font-mono text-xs text-ash">
                <code class="text-acid-lime"><%= api_key.key_prefix %>...</code>
                <span class="text-steel mx-2">|</span>
                CREATED: <%= time_ago_in_words(api_key.created_at).upcase %>_AGO
                <span class="text-steel mx-2">|</span>
                <% if api_key.last_used_at %>
                  LAST_USED: <%= time_ago_in_words(api_key.last_used_at).upcase %>_AGO
                <% else %>
                  STATUS: UNUSED
                <% end %>
              </p>
            </div>
            <%= button_to "[ REVOKE ]", settings_api_key_path(api_key), 
                method: :delete,
                class: "font-mono text-xs text-acid-pink hover:text-white uppercase tracking-widest bg-transparent border border-acid-pink px-3 py-2 hover:bg-acid-pink transition-all cursor-pointer",
                data: { turbo_confirm: "CONFIRM_REVOCATION?" } %>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="bg-carbon border border-steel p-6 shadow-[4px_4px_0_0_#333]">
    <h2 class="font-mono text-lg font-bold text-white mb-2">API_DOCUMENTATION</h2>
    <p class="font-mono text-xs text-ash mb-4">Use your API key in the Authorization header:</p>
    <pre class="bg-obsidian border border-steel text-acid-lime p-4 overflow-x-auto font-mono text-sm">curl -H "Authorization: Bearer YOUR_API_KEY" \
  <%= request.base_url %>/api/v1/me</pre>
    
    <h3 class="font-mono text-sm font-bold text-white mt-6 mb-3 uppercase tracking-widest">AVAILABLE_ENDPOINTS</h3>
    <ul class="font-mono text-xs text-ash space-y-2">
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">GET /api/v1/me</code> <span class="text-steel">-</span> Your profile</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">GET /api/v1/posts</code> <span class="text-steel">-</span> List posts</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">GET /api/v1/posts/:id</code> <span class="text-steel">-</span> Get a post</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">POST /api/v1/posts</code> <span class="text-steel">-</span> Create a post</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">DELETE /api/v1/posts/:id</code> <span class="text-steel">-</span> Delete your post</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">POST /api/v1/posts/:post_id/vote</code> <span class="text-steel">-</span> Vote on a post</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">DELETE /api/v1/posts/:post_id/vote</code> <span class="text-steel">-</span> Remove vote</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">GET /api/v1/themes</code> <span class="text-steel">-</span> List themes</li>
      <li><code class="bg-obsidian border border-steel px-2 py-1 text-acid-cyan">GET /api/v1/themes/:id</code> <span class="text-steel">-</span> Get a theme</li>
    </ul>
  </div>
</div>
